<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Delivery Details</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/js/Details For Checkout JS.js"></script>
</head>
<body class="bg-gray-100">

  <%- include('./partials/header') %>

  <div class="max-w-6xl mx-auto px-4 py-10">

    <!-- Google Map -->
    <div class="rounded-xl overflow-hidden shadow-lg mb-10">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d224345.83923192866!2d77.06889754725779!3d28.52758200617606!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390cfd5b347eb62d%3A0x52c2b7494e204dce!2sNew%20Delhi%2C%20Delhi!5e0!3m2!1sen!2sin!4v1642929688022!5m2!1sen!2sin"
        width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy">
      </iframe>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
      
      <!-- Delivery Form -->
      <div class="bg-white rounded-xl shadow-md p-8">
        <h2 class="text-2xl font-semibold text-center text-indigo-700 mb-6">Details For Delivery</h2>

        <div id="error_message" class="text-red-600 mb-4"></div>

        <form method="POST" action="/order" onsubmit="return validate_form();">
          <% if (product) { %>
            <input type="hidden" name="productid" value="<%= product._id %>" />
          <% } %>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input type="text" name="name" placeholder="Name" id="name"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <input type="text" name="street" placeholder="Street Address" id="address"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <input type="email" name="email" placeholder="Email-ID" id="email"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <input type="text" name="locality" placeholder="Locality/Apartment"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <input type="text" name="zipCode" placeholder="Pincode" id="pincode"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <input type="text" name="phone" placeholder="Contact No." id="phone"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <input type="text" name="deliveryDate" placeholder="Date (dd/mm/yyyy)" id="date"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <input type="text" name="timeSlot" placeholder="Time Slot (2 hours)" id="time"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />

            <select name="paymentMethod"
              class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
              <option value="">Select Payment Method</option>
              <option value="COD">Cash on Delivery</option>
              <option value="credit_card">Credit Card</option>
              <option value="debit_card">Debit Card</option>
              <option value="net_banking">Net Banking</option>
            </select>
          </div>

          <button type="submit"
            class="w-full mt-6 bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition duration-300">
            Confirm Order
          </button>
        </form>
      </div>

      <!-- Order Summary -->
      <div class="bg-white rounded-xl shadow-md p-8">
        <h2 class="text-2xl font-semibold text-center text-indigo-700 mb-6">Order Summary</h2>

        <% if (product) { %>
          <div class="space-y-4">
            <div class="flex justify-between">
              <span class="text-gray-700 font-medium">Product:</span>
              <span><%= product.name %></span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-700 font-medium">Price:</span>
              <span>₹<%= product.price %></span>
            </div>
            <div class="flex justify-between items-center">
              <label class="text-gray-700 font-medium" for="quantity">Quantity:</label>
              <input type="number" name="quantity" min="1" value="1"
                class="w-20 text-center border border-gray-300 rounded-md py-2 px-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
            </div>
          </div>

        <% } else if (cart && cart.length > 0) { %>
          <ul class="space-y-4">
            <% cart.forEach(item => { %>
              <li class="border-b pb-2">
                <div class="flex justify-between">
                  <span><%= item.product.name %></span>
                  <span>₹<%= item.product.price %> × <%= item.quantity %></span>
                </div>
              </li>
            <% }) %>
          </ul>
        <% } else { %>
          <p class="text-center text-gray-500">No items in the order.</p>
        <% } %>
      </div>
    </div>
  </div>

 

</body>
</html>
